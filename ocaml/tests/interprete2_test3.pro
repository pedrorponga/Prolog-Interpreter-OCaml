p(Z, h(Z, W), f(W)) :- r(X, XX), q(XX).
r(a, a).
q(a).
?- r(X, Y), q(X).